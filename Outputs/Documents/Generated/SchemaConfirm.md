

#Mesh/Confirm Service

The Mesh/Confirm confirmation service is a two party protocol. An 
Enquirer requests a response from the 

<dt>SRV Prefix: _Confirm._tcp

<dt>HTTP Well Known Service Prefix: /.well-known/confirm



Every Confirm Service transaction consists of exactly one
request followed by exactly one response.

There is no set sequence
in which operations are required to be performed. It is not
necessary to perform a Hello transaction prior to
a CreateGroup, AddMember or any other transaction.

##Request Messages

Base class for request messages.

###Message: ConfirmRequest

Base class for all request messages.

[No fields]

##Response Messages

Base class for all response messages. Contains only the
status code and status description fields.

###Message: ConfirmResponse

Base class for all response messages. Contains only the
status code and status description fields.

A service MAY return either the response message specified
for that transaction or any parent of that message. 
Thus the RecryptResponse message MAY be returned in response 
to any request.

[No fields]

##Imported Objects

The Recrypt Administration Sercice makes use of JSON objects
defined in the JOSE Signatgure and Encryption specifications.

##Common classes

The following classes are referenced at multiple points in the protocol.

###Structure: AccountEntry

Represents the collection of data associated with an account. This structure
is not used in the protocol itself and does not appear in the on-the-wire
format. It is included here so that it can be used as a reference point for
describing the semantics of the protocol transaction. It is possible that this
record format may prove of use in specifying archive and interchange protocols.

<dl>
<dt>ResponderAccount: String (Optional)
<dd>The Responder account the request is directed to.
<dt>RequestIDs: String [0..Many]
<dd>List of BrokerIDs of pending requests
<dt>ResponseIDs: String [0..Many]
<dd>List of BrokerIDs of responses
<dt>ArchivedIDs: String [0..Many]
<dd>List of expired requests, now archived.
</dl>
###Structure: EntryBase

Base class for entries.

<dl>
<dt>EnquirerID: String (Optional)
<dd>A unique identifier for the transaction generated by
the enquirer. This identifier MAY be used to reject duplicate
transactions by a broker or Requestor.		
<dt>BrokerID: String (Optional)
<dd>The unique identifier for the transaction generated by
the broker and returned in the corresponding Enquire
transaction.
</dl>
###Structure: RequestEntry

<dl>
<dt>Inherits:  EntryBase
</dl>

Describes a pending request and associated information.

<dl>
<dt>Request: JoseWebSignature (Optional)
<dd>Signed and optionally encrypted request message.
<dt>ResponderAccount: String (Optional)
<dd>The Responder account the request is directed to.
<dt>Expire: DateTime (Optional)
<dd>Date and time after which the Enquirer has no interest in
the request value. Note that a Broker MAY cancel requests
according to its own policy at any time.
</dl>
###Structure: ResponseEntry

<dl>
<dt>Inherits:  EntryBase
</dl>

Describes response to a pending request

<dl>
<dt>RequestStatus: String (Optional)
<dd>The status value. Valid values are PENDING, BCANCEL, ECANCEL, REPLY,
REFUSED, EXPIRED
<dt>Response: JoseWebSignature (Optional)
<dd>Signed and optionally encrypted response message.
</dl>
###Structure: TBSRequest

Some to be specified request?

<dl>
<dt>Text: String (Optional)
<dd>Text of the request
<dt>FromID: String (Optional)
<dd>The sender ID
<dt>ToID: String (Optional)
<dd>The recipient ID
</dl>
###Structure: TBSResponse

Some TBS response.

<dl>
<dt>SignedRequest: JoseWebSignature (Optional)
<dd>The signed request.
<dt>Value: Boolean (Optional)
<dd>No idea???
</dl>
##Utility Transactions

##Transaction: Hello

<dl>
<dt>Request:  HelloRequest
<dt>Response:  HelloResponse
</dl>

Report service and version information. 

The Hello transaction provides a means of determining which protocol
versions, message encodings and transport protocols are supported by
the service.

##Enquirer Transactions

##Transaction: Enquire

<dl>
<dt>Request:  EnquireRequest
<dt>Response:  EnquireResponse
</dl>

Post a confirmation request to the broker.

###Message: EnquireRequest

<dl>
<dt>Inherits:  ConfirmRequest
</dl>

Post a confirmation request.

<dl>
<dt>Request: RequestEntry (Optional)
<dd>The request
</dl>
###Message: EnquireResponse

<dl>
<dt>Inherits:  ConfirmResponse
</dl>

Reports the success or failure of an Enquire transaction.

<dl>
<dt>BrokerID: String (Optional)
<dd>A unique identifier for the transaction generated by
the broker.
</dl>
##Transaction: Status

<dl>
<dt>Request:  StatusRequest
<dt>Response:  StatusResponse
</dl>

Request status on a previously posted request

###Message: StatusRequest

<dl>
<dt>Inherits:  ConfirmRequest
</dl>

Reports the status or of an Enquire transaction.

<dl>
<dt>Cancel: Boolean (Optional)
<dd>If true, the broker is abandoning the request and it should
no longer be returned to the user as an active pending request.
This flag would typically be set true on the last polling attempt made 
before the Enquirer abandonds the request. It is therefore entirely
valid for a broker to return a Response value if the Cancel flag
is true.
<dt>BrokerID: String (Optional)
<dd>The unique identifier for the transaction generated by
the broker and returned in the corresponding Enquire
transaction.
</dl>
###Message: StatusResponse

<dl>
<dt>Inherits:  ConfirmResponse
</dl>

The result of a status request.

<dl>
<dt>Response: ResponseEntry (Optional)
<dd>The result from the responder.
</dl>
##Responder Transactions

##Transaction: Pending

<dl>
<dt>Request:  PendingRequest
<dt>Response:  PendingResponse
</dl>

Request a list of pending transactions meeting the specified
selection criteria.

###Message: PendingRequest

<dl>
<dt>Inherits:  ConfirmRequest
</dl>

Request a list of pending requests for a specified account.

<dl>
<dt>Responder: String (Optional)
<dd>The Responder account the the list of pending requests is 
requested for.
<dt>BrokerID: String (Optional)
<dd>The BrokerID of the pending request to return.
<dt>MaxResponse: Integer (Optional)
<dd>The maximum number of request entries to return.
<dt>BeforeId: Integer (Optional)
<dd>Only send request entries posted prior to the specified
entry. 
<dt>AfterId: Integer (Optional)
<dd>Only send request entries posted after the specified
entry. 
</dl>
###Message: PendingResponse

<dl>
<dt>Inherits:  ConfirmResponse
</dl>

Contains a list of pending requests.

<dl>
<dt>Entries: RequestEntry [0..Many]
<dd>List of pending requests.
</dl>
##Transaction: Respond

<dl>
<dt>Request:  RespondRequest
<dt>Response:  RespondResponse
</dl>

Respond to a confirmation request.

###Message: RespondRequest

<dl>
<dt>Inherits:  ConfirmRequest
</dl>

Respond to a confirmation request.

<dl>
<dt>Response: ResponseEntry (Optional)
<dd>Signed and optionally encrypted response message.
</dl>
###Message: RespondResponse

<dl>
<dt>Inherits:  ConfirmResponse
</dl>

Reports the success or failure of a Respond transaction.

[No fields]

